(()=>{document.querySelector(".playpause-btn").addEventListener("click",(function(){document.getElementById("error"),player.isPlaying()?player.stop():function(e){const t=mm.sequences.mergeConsecutiveNotes(e);player.setTempo(100),player.start(t)}(e.getNoteSequence())})),document.querySelector(".infill-btn").addEventListener("click",(function(){const t=e.data,o=[0,3,4,7,8,9];let n=[];for(let l=0;l<e.grid_width;l++){const o=Array(e.grid_height).fill(0).map(((e,t)=>e+t)).filter((e=>1===t[e][l].on));n.push(o.map((e=>MAX_PITCH-e)))}console.log("pitches per time:"),console.log(n);let r=Array(e.grid_height).fill(MAX_PITCH).map(((e,t)=>e-t));console.log("all pitches:"),console.log(r);let i=[];for(let t=0;t<e.grid_width;t++){let e=n[t];if(0===e.length){let e=l(r);i.push(e)}else{let t=l(e),n=l(r.filter((e=>o.includes(Math.abs(e-t)%12))));i.push(n)}}console.log("infilled pitches:"),console.log(i);for(let t of i.entries())e.toggleCell(MAX_PITCH-t[1],t[0],2);return i}));const e=new ButtonGrid,t=[];for(let l=0;l<e.grid_height;l++)t.push({pitch:MAX_PITCH-l,velocity:80});function l(e){var t;return e[(0,t=e.length-1,Math.floor(Math.random()*(t-0+1))+0)]}player.loadSamples({notes:t}),document.getElementById("container").addEventListener("click",(function(t){let l=t.target;if("BUTTON"===l.tagName){const t=parseInt(l.dataset.row),o=parseInt(l.dataset.col),n=parseInt(l.dataset.pitch);if(e.toggleCell(t,o,1),1===e.data[t][o].on){const e={pitch:n,velocity:80};player.playNoteDown(e),setTimeout((()=>player.playNoteUp(e)),150)}}}))})();