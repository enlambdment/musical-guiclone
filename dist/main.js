!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){},function(e,t,n){"use strict";n.r(t);var o=n(0);let r=new mm.SoundFontPlayer("https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus");document.querySelector(".playpause-btn").addEventListener("click",(function(){document.getElementById("error");if(r.isPlaying())r.stop();else{!function(e){const t=mm.sequences.mergeConsecutiveNotes(e);r.setTempo(100),r.start(t)}(l.getNoteSequence())}})),document.querySelector(".infill-btn").addEventListener("click",(function(){const e=l.data,t=[0,3,4,7,8,9];let n=[];for(let t=0;t<l.grid_width;t++){const o=Array(l.grid_height).fill(0).map((e,t)=>e+t).filter(n=>1===e[n][t].on);n.push(o.map(e=>MAX_PITCH-e))}console.log("pitches per time:"),console.log(n);let o=Array(l.grid_height).fill(MAX_PITCH).map((e,t)=>e-t);console.log("all pitches:"),console.log(o);let r=[];for(let e=0;e<l.grid_width;e++){let l=n[e];if(0===l.length){let e=c(o);r.push(e)}else{let e=c(l),n=c(o.filter(n=>t.includes(Math.abs(n-e)%12)));r.push(n)}}console.log("infilled pitches:"),console.log(r);for(let e of r.entries())l.toggleCell(MAX_PITCH-e[1],e[0],2);return r}));const l=new o.ButtonGrid,i=[];for(let e=0;e<l.grid_height;e++)i.push({pitch:MAX_PITCH-e,velocity:80});r.loadSamples({notes:i});function c(e){var t,n;return e[(t=0,n=e.length-1,Math.floor(Math.random()*(n-t+1))+t)]}document.getElementById("container").addEventListener("click",(function(e){let t=e.target;if("BUTTON"!==t.tagName)return;{const e=parseInt(t.dataset.row),n=parseInt(t.dataset.col),o=parseInt(t.dataset.pitch);l.toggleCell(e,n,1);if(1===l.data[e][n].on){const e={pitch:o,velocity:80};r.playNoteDown(e),setTimeout(()=>r.playNoteUp(e),150)}}}))}]);